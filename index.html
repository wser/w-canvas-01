<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <canvas id="c"></canvas>
    <script>
      const a = document.getElementById('c');
      a.width = innerWidth;
      a.height = innerHeight;
      let c = a.getContext('2d'),
        f = [
          [300, 100, 5, -0.2, 0],
          [300, 300, 5, 0.2, 0],
          [300, 200, 5, 0.4, 0],
          [300, 500, 5, -0.4, 0],
        ],
        h = -1;
      setInterval(() => {
        //drawing mechanism
        if (h > 0) f[h][2] += 0.1;
        c.clearRect(0, 0, innerWidth, innerHeight);
        for (let d = f.length, b = d, e; b--; ) {
          for (e = d; e--; )
            if (e != b && b != h && e != h) {
              let i = f[e][0] - f[b][0],
                j = f[e][1] - f[b][1],
                g = i * i + j * j,
                k = Math.sqrt(g);
              g = f[e][2] / g;
              f[b][3] += (i / k) * g;
              f[b][4] += (j / k) * g;
            }
          f[b][0] += f[b][3];
          f[b][1] += f[b][4];
          c.strokeStyle =
            'hsl(' +
            Math.min(
              300,
              Math.floor(50 * Math.sqrt(f[b][3] * f[b][3] + f[b][4] * f[b][4]))
            ) +
            ',100%,40%)';
          c.beginPath();
          c.arc(f[b][0], f[b][1], f[b][2], 0, Math.PI * 2, true);
          c.stroke();
        }
      }, 1);
      document.body.onmousedown = (d) => {
        h = f.length;
        f.push([d.clientX, d.clientY, 2, 0, 0]);
        return false;
      };
      document.body.onmouseup = (d) => {
        f[h][3] = (d.clientX - f[h][0]) / 100;
        f[h][4] = (d.clientY - f[h][1]) / 100;
        h = -1;
        return false;
      };
    </script>
  </body>
</html>
